<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#333333 name=theme-color> <base href=/ > <link href=global.css rel=stylesheet> <link href=manifest.json rel=manifest crossorigin=use-credentials> <link href=favicon.png rel=icon type=image/png> <link href=client/main.3129775746.css rel=stylesheet> <noscript id=sapper-head-start></noscript><title>Creating This Blog.</title><script id=twitter-wjs src=https://platform.twitter.com/widgets.js></script><meta content="Creating This Blog." property=og:title><meta content=https://joshglasson.com/images/icons/svelte_logo.png property=og:image><meta content="How to create a blog using Svelte" property=og:description><meta content=https://joshglasson.com/blog/creating_the_blog property=og:url><noscript id=sapper-head-end></noscript> </head> <body> <div id=sapper> <nav class=svelte-gj03cv id=navbar><ul class=svelte-gj03cv><li class=svelte-gj03cv><a href=. class=svelte-gj03cv>home</a></li> <li class=svelte-gj03cv><a href=about class=svelte-gj03cv>about</a></li> <li class=svelte-gj03cv><a href=blog class=svelte-gj03cv aria-current=page rel=prefetch>blog</a></li> <li class=svelte-gj03cv><a class=svelte-gj03cv>dark mode</a></ul></nav> <main class=svelte-u6q2x9> <div class="svelte-j9n4at postTitle"><h1 class=svelte-j9n4at>Creating This Blog.</h1> <h2 class=svelte-j9n4at><strong>How to create a blog using Svelte</strong></h2></div> <div class="svelte-j9n4at date"><h3><i>Originally posted on Fri Jul 24 2020</i></h3></div> <div class="svelte-j9n4at content"><p>I have talked about the reasons for me writing this blog on the sites <a href=about><strong>about</strong></a> page, so here is <strong><i>how</i></strong>.</p> <p>I attended a course through Makers Academy where <a href=https://mco.dev/ target=_blank>Marc Cohen</a> from Google gave us a quick run down of how to use Go. During the talk he mentioned <a href=https://svelte.dev/ target=_blank>Svelte</a>, which I decided to look into. I had quite liked working in React and saw it was similar, but if anything easier. After a bit of research I decided why not create my own blog!</p> <p>I found a guide on how to create a blog website based off of Sveltes sapper template: <a href=https://www.mahmoudashraf.dev/blog/build-a-blog-with-svelte-and-markdown/ target=_blank>https://www.mahmoudashraf.dev/blog/build-a-blog-with-svelte-and-markdown/</a></p> <p>I followed this blog post exactly to get a template to start working from. The only change was at the point of writing the blog post in markdown. The blog specifies that the file name and slug have to be the same, but theirs are different, so the example doesn't work!</p> <p>Now I had a solid baseline to start with, I started to think about what I would like to change. For some reason, my first thought was that it needed a dark mode. I did a quick bit of Googling and found <a href="https://svelte.dev/repl/ed4fef4beceb4b0eb295d1f9fdf3bd62?version=3.6.9" target=_blank>this on the Svelte REPL</a>:</p> <div id=imageDiv> <figure> <img alt="An App with a Button to toggle a dark mode" src=https://joshlearningtocode.files.wordpress.com/2020/08/darkmode_app.png style=width:50%> <figcaption>An App with a Button to toggle a dark mode</figcaption> </figure> <figure> <img alt="Code for the Dark Mode Button" src=https://joshlearningtocode.files.wordpress.com/2020/08/darkmode_button.png style=width:50%> <figcaption>Code for the Button</figcaption> </figure> </div> <p>This puts a button on the screen that lets you swap toggle dark mode on and off. I decided to take it to the next step, instead of having a button, I wanted to have it on my nav bar, and I also wanted to store the selection as a cookie so a users preference would be remembered.</p> <p>I added the following code to the top of my Nav component:</p> <div id=codeSnippet> <pre class=language-javascriptreact><code><span class=hljs-keyword>export</span> <span class=hljs-keyword>let</span> dark_toggle;

<span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>toggle</span>(<span class=hljs-params></span>) </span>{
  <span class=hljs-built_in>console</span>.log(<span class=hljs-string>"Start toggle: "</span> + dark_toggle)
  <span class=hljs-keyword>if</span> (dark_toggle === <span class=hljs-string>'false'</span>) {
    <span class=hljs-built_in>window</span>.document.body.classList.add(<span class=hljs-string>'dark-mode'</span>)
    <span class=hljs-built_in>localStorage</span>.setItem(<span class=hljs-string>'dark_mode_toggle'</span>, <span class=hljs-string>'true'</span>)
    dark_toggle = <span class=hljs-string>'true'</span>
  } <span class=hljs-keyword>else</span> {
    <span class=hljs-built_in>window</span>.document.body.classList.remove(<span class=hljs-string>'dark-mode'</span>)
    <span class=hljs-built_in>localStorage</span>.setItem(<span class=hljs-string>'dark_mode_toggle'</span>, <span class=hljs-string>'false'</span>)
    dark_toggle = <span class=hljs-string>'false'</span>
  }
  <span class=hljs-built_in>console</span>.log(<span class=hljs-string>"End toggle: "</span> + dark_toggle)
}

onMount(<span class=hljs-keyword>async</span> () => {
  dark_toggle = <span class=hljs-built_in>localStorage</span>.getItem(<span class=hljs-string>'dark_mode_toggle'</span>)
  <span class=hljs-built_in>console</span>.log(<span class=hljs-string>"From Storage: "</span> + dark_toggle)
  <span class=hljs-keyword>if</span> (dark_toggle === <span class=hljs-string>'true'</span>) {
    <span class=hljs-built_in>window</span>.document.body.classList.add(<span class=hljs-string>'dark-mode'</span>)
  }
});</code></pre></div> <p>The first part is the <code>toggle()</code> function, which when activated checks a variable called <code>dark_toggle</code>. If it is set to false, then it will apply the dark mode, and set the variable to true. If it is already true it does the opposite. As well as setting the local variable, it also sets an item in <code>localStorage</code> called <code>dark_mode_toggle</code> to the same value. This means that it is stored locally on the users browser.</p> <p>The <code>onMount</code> method will run as soon as the document is loaded, and it retrieves the flag from <code>localStorage</code> and sets the theme accordingly.</p> <p>I added the following to my Nav code too, in the list which makes up the links:</p> <div id=codeSnippet> <pre class=language-javascriptreact><code>&lt;li><span class=xml><span class=hljs-tag>&lt;<span class=hljs-name>a</span> <span class=hljs-attr>on:click</span>=<span class=hljs-string>{toggle}</span>></span>{dark_toggle === 'true' ? "light" : "dark"} mode<span class=hljs-tag>&lt;/<span class=hljs-name>a</span>></span></span>&lt;/li></code></pre></div> <p>So <code>on:click={toggle}</code> means it will activate the <code>toggle()</code> function when clicked. The text it displays will change depending on what theme is selected too. I also added <code>cursor: pointer;</code> to my CSS rules to ensure that the cursor changed to a pointer when hovering over the option in the nav bar. This was the outcome:</p> <div id=imageDiv> <figure> <img alt="A gif of my blog switching themes" src=https://joshlearningtocode.files.wordpress.com/2020/07/blog_dark_mode.gif> </figure> </div> <p>After getting this working, I made a few more changes to the front and about pages to make them relevant to me. The next big change I made was to the Recent Posts page. You can see in the blog post I started with that the recent posts were just displayed as a list of links. I wanted mine to be a bit more fancy, with a cover image, title and headline. Looking at how they had created the link using the title in the markdown files, it was easy to add more information. At the beggining of each markdown file, I added headline and image so I could then pull them out when creating the recent posts.</p> <p>Here is the information in the markdown file:</p> <div id=codeSnippet> <pre class=language-javascriptreact><code>---
slug: '2020-07-24 creating-the-blog'
title: 'Creating This Blog.'
headline: 'How to create a blog using Svelte'
<span class=hljs-section>image: "./images/svelte<span class=hljs-emphasis>_logo.png"
---</span></span></code></pre></div> <p>Which is then accessed in the <code>index.svelte</code> file:</p> <div id=codeSnippet> <pre class=language-javascriptreact><code>{#each posts as post}
    <span class=hljs-tag>&lt;<span class=hljs-name>div</span>></span>
        <span class=hljs-tag>&lt;<span class=hljs-name>img</span> <span class=hljs-attr>src</span>=<span class=hljs-string>{post.image}</span> <span class=hljs-attr>alt</span>=<span class=hljs-string>"Post Display"</span>/></span>
        <span class=hljs-tag>&lt;<span class=hljs-name>a</span> <span class=hljs-attr>rel</span>=<span class=hljs-string>'prefetch'</span> <span class=hljs-attr>href</span>=<span class=hljs-string>'blog/{post.slug}'</span>></span><span class=hljs-tag>&lt;<span class=hljs-name>h1</span>></span>{post.title}<span class=hljs-tag>&lt;/<span class=hljs-name>h1</span>></span><span class=hljs-tag>&lt;/<span class=hljs-name>a</span>></span>
        <span class=hljs-tag>&lt;<span class=hljs-name>h3</span>></span>{post.headline}<span class=hljs-tag>&lt;/<span class=hljs-name>h3</span>></span>
    <span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span>
{/each}</code></pre></div> <p>Now I had more information to work with, I changed the CSS rules to make the page look more appealing:</p> <div id=codeSnippet> <pre class=language-javascriptreact><code><span class=hljs-selector-id>#pageTitle</span> {
  <span class=hljs-attribute>margin</span>: <span class=hljs-number>0</span> <span class=hljs-number>0</span> <span class=hljs-number>2em</span> <span class=hljs-number>0</span>;
}

<span class=hljs-selector-tag>div</span> {
  <span class=hljs-attribute>margin</span>: <span class=hljs-number>0</span> <span class=hljs-number>0</span> <span class=hljs-number>1em</span> <span class=hljs-number>1em</span>;
  <span class=hljs-attribute>width</span>: <span class=hljs-number>100%</span>;
  <span class=hljs-attribute>padding-bottom</span>: <span class=hljs-number>0.5em</span>;
  <span class=hljs-attribute>border-bottom</span>: <span class=hljs-number>1px</span> solid lightgray;
  <span class=hljs-attribute>overflow-x</span>: auto;
}

<span class=hljs-selector-tag>div</span> <span class=hljs-selector-tag>img</span> {
  <span class=hljs-attribute>display</span>: block;
  <span class=hljs-attribute>float</span>: left;
  <span class=hljs-attribute>width</span>: <span class=hljs-number>100%</span>;
  <span class=hljs-attribute>max-width</span>: <span class=hljs-number>150px</span>;
  <span class=hljs-attribute>margin</span>: <span class=hljs-number>0</span> <span class=hljs-number>1em</span> <span class=hljs-number>0</span> <span class=hljs-number>0</span>;
}

<span class=hljs-selector-tag>div</span> <span class=hljs-selector-tag>h1</span>{
  <span class=hljs-attribute>vertical-align</span>: middle;
}

<span class=hljs-selector-tag>div</span> <span class=hljs-selector-tag>h3</span>{
  <span class=hljs-attribute>vertical-align</span>: middle;
  <span class=hljs-attribute>position</span>: relative;
}</code></pre></div> <p>The end result was this:</p> <div id=imageDiv> <figure> <img alt="The improved recent posts page" src=https://joshlearningtocode.files.wordpress.com/2020/08/recent_posts.png> <figcaption>The improved recent posts page, you must have seen it to get here though!</figcaption> </figure> </div> <p>Nexy I wanted to host the blog somewhere. Up to now I had been viewing the blog locally using <code>npm run dev</code> to run the app on <code>localhost:3000</code>. It was helpful as it would automatically update after I saved any files, but I was now ready to deploy it somewhere actually visible to the world. I decided to use GitHub Pages as it is free and integrated directly with my repository.</p> <p>I found another blog post which was helpful in getting this working: <a href=https://dev.to/pixeline/how-to-deploy-a-sapper-pwa-on-github-pages-47lc target=_blank>https://dev.to/pixeline/how-to-deploy-a-sapper-pwa-on-github-pages-47lc</a></p> <p>I pretty much followed it to the word here, my only addition was adding this to my <code>package.json</code> file in the <code>scripts {}</code> section:</p> <div id=codeSnippet> <pre class=language-javascriptreact><code>"predeploy": "npx sapper export"</code></pre></div> <p>This meant that before trying to deploy the app it would always rebuild and export it. I got this working and up on my GitHub Pages pretty quickly, so I can deploy with a simple <code>npm run reploy</code>. However running that command every time would be a bit annoying, so I added a GitHub Action to deploy it automatically. </p> <p>I found this post which helped me set up a <code>sapper_build.yml</code> file: <a href=https://github.com/marketplace/actions/sapper-action target=_blank>https://github.com/marketplace/actions/sapper-action</a></p> <div id=codeSnippets> <pre class=language-javascriptreact><code><span class=hljs-attr>name:</span> <span class=hljs-string>Build</span> <span class=hljs-string>Sapper</span> <span class=hljs-string>and</span> <span class=hljs-string>Deploy</span> <span class=hljs-string>to</span> <span class=hljs-string>GitHub</span> <span class=hljs-string>Pages</span>

<span class=hljs-attr>on:</span>
    <span class=hljs-attr>push:</span>
        <span class=hljs-attr>branches:</span> [ <span class=hljs-string>master</span> ]
    <span class=hljs-attr>pull_request:</span>
        <span class=hljs-attr>branches:</span> [ <span class=hljs-string>master</span> ]

<span class=hljs-attr>jobs:</span>
  <span class=hljs-attr>build_deploy:</span>
    <span class=hljs-attr>runs-on:</span> <span class=hljs-string>ubuntu-latest</span>
    <span class=hljs-attr>steps:</span>
      <span class=hljs-bullet>-</span> <span class=hljs-attr>uses:</span> <span class=hljs-string>actions/checkout@master</span>
      <span class=hljs-bullet>-</span> <span class=hljs-attr>name:</span> <span class=hljs-string>Build</span> <span class=hljs-string>Sapper</span>
        <span class=hljs-attr>uses:</span> <span class=hljs-string>truewebartisans/actions-sapper@master</span>
        <span class=hljs-attr>with:</span>
            <span class=hljs-attr>args:</span> <span class=hljs-string>"--basepath JoshsBlog --legacy"</span>
      <span class=hljs-bullet>-</span> <span class=hljs-attr>name:</span> <span class=hljs-string>Deploy</span> <span class=hljs-string>to</span> <span class=hljs-string>GitHub</span> <span class=hljs-string>Pages</span>
        <span class=hljs-attr>uses:</span> <span class=hljs-string>peaceiris/actions-gh-pages@v3</span>
        <span class=hljs-attr>with:</span>
          <span class=hljs-attr>publish_dir:</span> <span class=hljs-string>__sapper__/export/JoshsBlog/</span>
          <span class=hljs-attr>publish_branch:</span> <span class=hljs-string>gh-pages</span>
          <span class=hljs-attr>github_token:</span> <span class=hljs-string>${{</span> <span class=hljs-string>secrets.GITHUB_TOKEN</span> <span class=hljs-string>}}</span></code></pre></div> <p>This meant that any time I pushed or merged to master, it would kick off this action, which will build and deploy my project into my gh-pages branch, where GitHub Pages reads the data from.</p> <div id=imageDiv> <figure> <img alt="GitHub Actions running my deploy script" src=https://joshlearningtocode.files.wordpress.com/2020/08/github_actions.png> <figcaption>GitHub Actions running my deploy script after each merge</figcaption> </figure> </div> <p>The end result of all this is the blog you are currently reading! It is hosted here: <a href=https://joshglasson.com/ target=_blank>https://joshglasson.com/</a></p> <p>After seeing it live I realised that the posts were in chronological order, as in oldest at the top. That doesn't make much sense for a blog, so I flipped it round by editing the function used to retrieve the posts:</p> <div id=codeSnippet> <pre class=language-javascriptreact><code><span class=hljs-keyword>export</span> <span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>preload</span>(<span class=hljs-params>{ params, query }</span>) </span>{
  <span class=hljs-keyword>return</span> <span class=hljs-built_in>this</span>.fetch(<span class=hljs-string>`blog.json`</span>).then(<span class=hljs-function><span class=hljs-params>r</span> =></span> r.json()).then(<span class=hljs-function><span class=hljs-params>posts</span> =></span> {
    posts.sort().reverse()
    <span class=hljs-keyword>return</span> { posts };
  });
}</code></pre></div> <p>I then viewed it on my phone and felt some of the images were a bit too small, so I wanted the images to expand when clicked. I started following a guide on <a href=https://www.w3schools.com/howto/howto_css_modal_images.asp target=_blank>using modals by w3schools</a> which was a helpful starting point. However there was a couple of problems. The first was that <code>document</code> did not exist straight away for me, so it would throw an error, the second was their example only worked for one image, to have more than one you would have to specify every single image id.</p> <p>To solve the first problem, I used <code>onMount</code> to wait for the page to load before triggering the script, so <code>document</code> definitely existed before I tried accessing it. To solve the second problem I had to change a little more. Instead of getting a single element by id, I got all elements that had the <code>img</code> tag.</p> <div id=codeSnippet> <pre class=language-javascriptreact><code><span class=hljs-keyword>var</span> img = <span class=hljs-built_in>document</span>.getElementsByTagName(<span class=hljs-string>"IMG"</span>);</code></pre></div> <p>Now that I had an array of all my image elements, instead of attaching an <code>onclick</code> to a single element, I looped through my array and an attached event listener to each image.</p> <div id=codeSnippet> <pre class=language-javascriptreact><code><span class=hljs-keyword>for</span> (<span class=hljs-keyword>var</span> i = <span class=hljs-number>0</span>; i &lt; img.length; i++) {
  img[i].addEventListener(<span class=hljs-string>'click'</span>, <span class=hljs-function><span class=hljs-keyword>function</span>(<span class=hljs-params>event</span>)</span>{
    event.preventDefault()
    modal.style.display = <span class=hljs-string>"block"</span>;
    modalImg.src = <span class=hljs-built_in>this</span>.src;
    captionText.innerHTML = <span class=hljs-built_in>this</span>.alt;
  });
}; </code></pre></div> <p>This worked exactly as intended!</p> <p>I wanted to be able to swipe to close the images when viewing on mobile too, so I added some more functions to handle this:</p> <div id=codeSnippet> <pre class=language-javascriptreact><code><span class=hljs-keyword>var</span> touchstartY = <span class=hljs-number>0</span>;
<span class=hljs-keyword>var</span> touchendY = <span class=hljs-number>0</span>;
<span class=hljs-built_in>window</span>.addEventListener(<span class=hljs-string>'touchstart'</span>, <span class=hljs-function><span class=hljs-keyword>function</span>(<span class=hljs-params>event</span>) </span>{
  <span class=hljs-keyword>if</span> (modal.style.display === <span class=hljs-string>'block'</span>) {
    <span class=hljs-built_in>console</span>.log(<span class=hljs-string>'touchstart'</span>);
    <span class=hljs-built_in>console</span>.log(event);
    touchstartY = event.changedTouches[<span class=hljs-number>0</span>].screenY;
  }
}, <span class=hljs-literal>false</span>);

<span class=hljs-built_in>window</span>.addEventListener(<span class=hljs-string>'touchend'</span>, <span class=hljs-function><span class=hljs-keyword>function</span>(<span class=hljs-params>event</span>) </span>{
  <span class=hljs-keyword>if</span> (modal.style.display === <span class=hljs-string>'block'</span>) {
    <span class=hljs-built_in>console</span>.log(<span class=hljs-string>'touchend'</span>);
    touchendY = event.changedTouches[<span class=hljs-number>0</span>].screenY;
    handleGesure();
  }
}, <span class=hljs-literal>false</span>);

<span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>handleGesure</span>(<span class=hljs-params></span>) </span>{
  <span class=hljs-keyword>var</span> swiped = <span class=hljs-string>'swiped: '</span>;

  <span class=hljs-keyword>var</span> dif = <span class=hljs-built_in>Math</span>.abs(touchstartY - touchendY);
  <span class=hljs-keyword>var</span> h = <span class=hljs-built_in>window</span>.innerHeight/<span class=hljs-number>3</span>;
  <span class=hljs-built_in>console</span>.log(dif)
  <span class=hljs-keyword>if</span> (dif > h) {
    closeModal()
  }
}

<span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>closeModal</span>(<span class=hljs-params></span>) </span>{
  modal.style.display = <span class=hljs-string>'none'</span>;
  <span class=hljs-keyword>const</span> scrollY = <span class=hljs-built_in>document</span>.body.style.top;
  <span class=hljs-built_in>document</span>.body.style.position = <span class=hljs-string>''</span>;
  <span class=hljs-built_in>document</span>.body.style.top = <span class=hljs-string>''</span>;
  <span class=hljs-built_in>window</span>.scrollTo(<span class=hljs-number>0</span>, <span class=hljs-built_in>parseInt</span>(scrollY || <span class=hljs-string>'0'</span>) * <span class=hljs-number>-1</span>);
  <span class=hljs-built_in>document</span>.body.style.left = <span class=hljs-string>''</span>
  <span class=hljs-built_in>document</span>.body.style.transform = <span class=hljs-string>''</span>
}</code></pre></div> <p>Basically this code listens for touches on the screen whilst the modal is open. It records the start and end position for the touches on the y axis (so only swipes up or down). It calculates the difference between the two to see how far the user swiped, then compares that to the height of the screen. If the distance swiped is over a third of the screen size it will trigger the method to close the modal.</p> <p>I also had to add some styling here to ensure that swiping didn't change the position on the body behind the modal, as at first it would scroll the page. I updated the event listener that opened the modal: </p> <div id=codeSnippet> <pre class=language-javascriptreact><code><span class=hljs-keyword>for</span> (<span class=hljs-keyword>var</span> i = <span class=hljs-number>0</span>; i &lt; img.length; i++) {
  img[i].addEventListener(<span class=hljs-string>'click'</span>, <span class=hljs-function><span class=hljs-keyword>function</span>(<span class=hljs-params>event</span>)</span>{
    event.preventDefault();
    <span class=hljs-built_in>document</span>.body.style.top = <span class=hljs-string>`-<span class=hljs-subst>${<span class=hljs-built_in>window</span>.scrollY}</span>px`</span>;
    modal.style.display = <span class=hljs-string>"block"</span>;
    modalImg.src = <span class=hljs-built_in>this</span>.src;
    captionText.innerHTML = <span class=hljs-built_in>this</span>.alt;
    <span class=hljs-built_in>document</span>.body.style.position = <span class=hljs-string>'fixed'</span>;
  });
}; </code></pre></div> <p><code>document.body.style.top = '-${window.scrollY}px'</code> records the current scroll position on the screen. This had to go before the opening of the modal otherwise the window would change from referring to the body to referring to the modal. <code>document.body.style.position = 'fixed';</code> stops the screen from scrolling.</p> <p>The following in the <code>closeModal()</code> function resets these values back to normal upon closing the modal:</p> <div id=codeSnippet> <pre class=language-javascriptreact><code><span class=hljs-keyword>const</span> scrollY = <span class=hljs-built_in>document</span>.body.style.top;
<span class=hljs-built_in>document</span>.body.style.position = <span class=hljs-string>''</span>;
<span class=hljs-built_in>document</span>.body.style.top = <span class=hljs-string>''</span>;
<span class=hljs-built_in>window</span>.scrollTo(<span class=hljs-number>0</span>, <span class=hljs-built_in>parseInt</span>(scrollY || <span class=hljs-string>'0'</span>) * <span class=hljs-number>-1</span>);
<span class=hljs-built_in>document</span>.body.style.left = <span class=hljs-string>''</span>
<span class=hljs-built_in>document</span>.body.style.transform = <span class=hljs-string>''</span></code></pre></div> <p>I hope this was interesting and helpful to anyone else trying to build a website with Svelte and Sapper!</p> </div> <div id=myModal class="svelte-j9n4at modal"> <span class="svelte-j9n4at close">×</span> <img alt="modal generated" class="svelte-j9n4at modal-content" id=img01> <div id=caption class=svelte-j9n4at></div></div> <div class=svelte-b7hd5f><a href=about><img alt=Me src="./images/about/Small Profile Pic.jpg" class="svelte-b7hd5f signature-image"></a> <h3 class=svelte-b7hd5f>Post by</h3> <a href=about><h1 class=svelte-b7hd5f>Josh Glasson</h1></a> <h3 class=svelte-b7hd5f>Software Developer. Creator and owner of this blog.</h3></div></main></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,null,(function(a){return {post:{html:"\u003Cp\u003EI have talked about the reasons for me writing this blog on the sites \u003Ca href=\"about\"\u003E\u003Cstrong\u003Eabout\u003C\u002Fstrong\u003E\u003C\u002Fa\u003E page, so here is \u003Cstrong\u003E\u003Ci\u003Ehow\u003C\u002Fi\u003E\u003C\u002Fstrong\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003EI attended a course through Makers Academy where \u003Ca href=\"https:\u002F\u002Fmco.dev\u002F\" target=\"_blank\"\u003EMarc Cohen\u003C\u002Fa\u003E from Google gave us a quick run down of how to use Go. During the talk he mentioned \u003Ca href=\"https:\u002F\u002Fsvelte.dev\u002F\" target=\"_blank\"\u003ESvelte\u003C\u002Fa\u003E, which I decided to look into. I had quite liked working in React and saw it was similar, but if anything easier. \nAfter a bit of research I decided why not create my own blog!\u003C\u002Fp\u003E\n\u003Cp\u003EI found a guide on how to create a blog website based off of Sveltes sapper template:\n\u003Ca href=\"https:\u002F\u002Fwww.mahmoudashraf.dev\u002Fblog\u002Fbuild-a-blog-with-svelte-and-markdown\u002F\" target=\"_blank\"\u003Ehttps:\u002F\u002Fwww.mahmoudashraf.dev\u002Fblog\u002Fbuild-a-blog-with-svelte-and-markdown\u002F\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EI followed this blog post exactly to get a template to start working from. The only change was at the point of writing the blog post in markdown. The blog specifies that the file name and slug have to be the same, but theirs are different, so the example doesn&#39;t work!\u003C\u002Fp\u003E\n\u003Cp\u003ENow I had a solid baseline to start with, I started to think about what I would like to change. For some reason, my first thought was that it needed a dark mode. I did a quick bit of Googling and found \u003Ca href=\"https:\u002F\u002Fsvelte.dev\u002Frepl\u002Fed4fef4beceb4b0eb295d1f9fdf3bd62?version=3.6.9\" target=\"_blank\"\u003Ethis on the Svelte REPL\u003C\u002Fa\u003E:\u003C\u002Fp\u003E\n\u003Cdiv id=\"imageDiv\"\u003E\n  \u003Cfigure\u003E\n    \u003Cimg src=\"https:\u002F\u002Fjoshlearningtocode.files.wordpress.com\u002F2020\u002F08\u002Fdarkmode_app.png\" style=\"width:50%;\" alt=\"An App with a Button to toggle a dark mode\"\u002F\u003E\n    \u003Cfigcaption\u003EAn App with a Button to toggle a dark mode\u003C\u002Ffigcaption\u003E\n  \u003C\u002Ffigure\u003E\n  \u003Cfigure\u003E\n    \u003Cimg src=\"https:\u002F\u002Fjoshlearningtocode.files.wordpress.com\u002F2020\u002F08\u002Fdarkmode_button.png\" style=\"width:50%;\" alt=\"Code for the Dark Mode Button\"\u002F\u003E\n    \u003Cfigcaption\u003ECode for the Button\u003C\u002Ffigcaption\u003E\u003C\u002Fa\u003E\n  \u003C\u002Ffigure\u003E\n\u003C\u002Fdiv\u003E\n\n\u003Cp\u003EThis puts a button on the screen that lets you swap toggle dark mode on and off. I decided to take it to the next step, instead of having a button, I wanted to have it on my nav bar, and I also wanted to store the selection as a cookie so a users preference would be remembered.\u003C\u002Fp\u003E\n\u003Cp\u003EI added the following code to the top of my Nav component:\u003C\u002Fp\u003E\n\u003Cdiv id=\"codeSnippet\"\u003E\n\n\u003Cpre class='language-javascriptreact'\u003E\u003Ccode\u003E\u003Cspan class=\"hljs-keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E dark_toggle;\n\n\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003Etoggle\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003E\u003C\u002Fspan\u003E) \u003C\u002Fspan\u003E{\n  \u003Cspan class=\"hljs-built_in\"\u003Econsole\u003C\u002Fspan\u003E.log(\u003Cspan class=\"hljs-string\"\u003E&quot;Start toggle: &quot;\u003C\u002Fspan\u003E + dark_toggle)\n  \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (dark_toggle === \u003Cspan class=\"hljs-string\"\u003E&#x27;false&#x27;\u003C\u002Fspan\u003E) {\n    \u003Cspan class=\"hljs-built_in\"\u003Ewindow\u003C\u002Fspan\u003E.document.body.classList.add(\u003Cspan class=\"hljs-string\"\u003E&#x27;dark-mode&#x27;\u003C\u002Fspan\u003E)\n    \u003Cspan class=\"hljs-built_in\"\u003ElocalStorage\u003C\u002Fspan\u003E.setItem(\u003Cspan class=\"hljs-string\"\u003E&#x27;dark_mode_toggle&#x27;\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-string\"\u003E&#x27;true&#x27;\u003C\u002Fspan\u003E)\n    dark_toggle = \u003Cspan class=\"hljs-string\"\u003E&#x27;true&#x27;\u003C\u002Fspan\u003E\n  } \u003Cspan class=\"hljs-keyword\"\u003Eelse\u003C\u002Fspan\u003E {\n    \u003Cspan class=\"hljs-built_in\"\u003Ewindow\u003C\u002Fspan\u003E.document.body.classList.remove(\u003Cspan class=\"hljs-string\"\u003E&#x27;dark-mode&#x27;\u003C\u002Fspan\u003E)\n    \u003Cspan class=\"hljs-built_in\"\u003ElocalStorage\u003C\u002Fspan\u003E.setItem(\u003Cspan class=\"hljs-string\"\u003E&#x27;dark_mode_toggle&#x27;\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-string\"\u003E&#x27;false&#x27;\u003C\u002Fspan\u003E)\n    dark_toggle = \u003Cspan class=\"hljs-string\"\u003E&#x27;false&#x27;\u003C\u002Fspan\u003E\n  }\n  \u003Cspan class=\"hljs-built_in\"\u003Econsole\u003C\u002Fspan\u003E.log(\u003Cspan class=\"hljs-string\"\u003E&quot;End toggle: &quot;\u003C\u002Fspan\u003E + dark_toggle)\n}\n\nonMount(\u003Cspan class=\"hljs-keyword\"\u003Easync\u003C\u002Fspan\u003E () =&gt; {\n  dark_toggle = \u003Cspan class=\"hljs-built_in\"\u003ElocalStorage\u003C\u002Fspan\u003E.getItem(\u003Cspan class=\"hljs-string\"\u003E&#x27;dark_mode_toggle&#x27;\u003C\u002Fspan\u003E)\n  \u003Cspan class=\"hljs-built_in\"\u003Econsole\u003C\u002Fspan\u003E.log(\u003Cspan class=\"hljs-string\"\u003E&quot;From Storage: &quot;\u003C\u002Fspan\u003E + dark_toggle)\n  \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (dark_toggle === \u003Cspan class=\"hljs-string\"\u003E&#x27;true&#x27;\u003C\u002Fspan\u003E) {\n    \u003Cspan class=\"hljs-built_in\"\u003Ewindow\u003C\u002Fspan\u003E.document.body.classList.add(\u003Cspan class=\"hljs-string\"\u003E&#x27;dark-mode&#x27;\u003C\u002Fspan\u003E)\n  }\n});\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\n\u003Cp\u003EThe first part is the \u003Ccode\u003Etoggle()\u003C\u002Fcode\u003E function, which when activated checks a variable called \u003Ccode\u003Edark_toggle\u003C\u002Fcode\u003E. If it is set to false, then it will apply the dark mode, and set the variable to true. If it is already true it does the opposite. As well as setting the local variable, it also sets an item in \u003Ccode\u003ElocalStorage\u003C\u002Fcode\u003E called \u003Ccode\u003Edark_mode_toggle\u003C\u002Fcode\u003E to the same value. This means that it is stored locally on the users browser.\u003C\u002Fp\u003E\n\u003Cp\u003EThe \u003Ccode\u003EonMount\u003C\u002Fcode\u003E method will run as soon as the document is loaded, and it retrieves the flag from \u003Ccode\u003ElocalStorage\u003C\u002Fcode\u003E and sets the theme accordingly.\u003C\u002Fp\u003E\n\u003Cp\u003EI added the following to my Nav code too, in the list which makes up the links:\u003C\u002Fp\u003E\n\u003Cdiv id=\"codeSnippet\"\u003E\n\n\u003Cpre class='language-javascriptreact'\u003E\u003Ccode\u003E&lt;li&gt;\u003Cspan class=\"xml\"\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Ea\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eon:click\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E{toggle}\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E{dark_toggle === &#x27;true&#x27; ? &quot;light&quot; : &quot;dark&quot;} mode\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Ea\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E&lt;\u002Fli&gt;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\n\u003Cp\u003ESo \u003Ccode\u003Eon:click={toggle}\u003C\u002Fcode\u003E means it will activate the \u003Ccode\u003Etoggle()\u003C\u002Fcode\u003E function when clicked. The text it displays will change depending on what theme is selected too. I also added \u003Ccode\u003Ecursor: pointer;\u003C\u002Fcode\u003E to my CSS rules to ensure that the cursor changed to a pointer when hovering over the option in the nav bar. This was the outcome:\u003C\u002Fp\u003E\n\u003Cdiv id=\"imageDiv\"\u003E\n  \u003Cfigure\u003E\n    \u003Cimg src=\"https:\u002F\u002Fjoshlearningtocode.files.wordpress.com\u002F2020\u002F07\u002Fblog_dark_mode.gif\" alt=\"A gif of my blog switching themes\"\u002F\u003E\n  \u003C\u002Ffigure\u003E\n\u003C\u002Fdiv\u003E\n\n\u003Cp\u003EAfter getting this working, I made a few more changes to the front and about pages to make them relevant to me. The next big change I made was to the Recent Posts page. You can see in the blog post I started with that the recent posts were just displayed as a list of links. I wanted mine to be a bit more fancy, with a cover image, title and headline. Looking at how they had created the link using the title in the markdown files, it was easy to add more information. At the beggining of each markdown file, I added headline and image so I could then pull them out when creating the recent posts.\u003C\u002Fp\u003E\n\u003Cp\u003EHere is the information in the markdown file:\u003C\u002Fp\u003E\n\u003Cdiv id=\"codeSnippet\"\u003E\n\n\u003Cpre class='language-javascriptreact'\u003E\u003Ccode\u003E---\nslug: &#x27;2020-07-24 creating-the-blog&#x27;\ntitle: &#x27;Creating This Blog.&#x27;\nheadline: &#x27;How to create a blog using Svelte&#x27;\n\u003Cspan class=\"hljs-section\"\u003Eimage: &quot;.\u002Fimages\u002Fsvelte\u003Cspan class=\"hljs-emphasis\"\u003E_logo.png&quot;\n---\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\n\u003Cp\u003EWhich is then accessed in the \u003Ccode\u003Eindex.svelte\u003C\u002Fcode\u003E file:\u003C\u002Fp\u003E\n\u003Cdiv id=\"codeSnippet\"\u003E\n\n\u003Cpre class='language-javascriptreact'\u003E\u003Ccode\u003E{#each posts as post}\n    \u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Eimg\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Esrc\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E{post.image}\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Ealt\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E&quot;Post Display&quot;\u003C\u002Fspan\u003E\u002F&gt;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Ea\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Erel\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E&#x27;prefetch&#x27;\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Ehref\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E&#x27;blog\u002F{post.slug}&#x27;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Eh1\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E{post.title}\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Eh1\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Ea\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Eh3\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E{post.headline}\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Eh3\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n{\u002Feach}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\n\u003Cp\u003ENow I had more information to work with, I changed the CSS rules to make the page look more appealing:\u003C\u002Fp\u003E\n\u003Cdiv id=\"codeSnippet\"\u003E\n\n\u003Cpre class='language-javascriptreact'\u003E\u003Ccode\u003E\u003Cspan class=\"hljs-selector-id\"\u003E#pageTitle\u003C\u002Fspan\u003E {\n  \u003Cspan class=\"hljs-attribute\"\u003Emargin\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-number\"\u003E2em\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E;\n}\n\n\u003Cspan class=\"hljs-selector-tag\"\u003Ediv\u003C\u002Fspan\u003E {\n  \u003Cspan class=\"hljs-attribute\"\u003Emargin\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-number\"\u003E1em\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-number\"\u003E1em\u003C\u002Fspan\u003E;\n  \u003Cspan class=\"hljs-attribute\"\u003Ewidth\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E100%\u003C\u002Fspan\u003E;\n  \u003Cspan class=\"hljs-attribute\"\u003Epadding-bottom\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E0.5em\u003C\u002Fspan\u003E;\n  \u003Cspan class=\"hljs-attribute\"\u003Eborder-bottom\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E1px\u003C\u002Fspan\u003E solid lightgray;\n  \u003Cspan class=\"hljs-attribute\"\u003Eoverflow-x\u003C\u002Fspan\u003E: auto;\n}\n\n\u003Cspan class=\"hljs-selector-tag\"\u003Ediv\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-selector-tag\"\u003Eimg\u003C\u002Fspan\u003E {\n  \u003Cspan class=\"hljs-attribute\"\u003Edisplay\u003C\u002Fspan\u003E: block;\n  \u003Cspan class=\"hljs-attribute\"\u003Efloat\u003C\u002Fspan\u003E: left;\n  \u003Cspan class=\"hljs-attribute\"\u003Ewidth\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E100%\u003C\u002Fspan\u003E;\n  \u003Cspan class=\"hljs-attribute\"\u003Emax-width\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E150px\u003C\u002Fspan\u003E;\n  \u003Cspan class=\"hljs-attribute\"\u003Emargin\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-number\"\u003E1em\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E;\n}\n\n\u003Cspan class=\"hljs-selector-tag\"\u003Ediv\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-selector-tag\"\u003Eh1\u003C\u002Fspan\u003E{\n  \u003Cspan class=\"hljs-attribute\"\u003Evertical-align\u003C\u002Fspan\u003E: middle;\n}\n\n\u003Cspan class=\"hljs-selector-tag\"\u003Ediv\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-selector-tag\"\u003Eh3\u003C\u002Fspan\u003E{\n  \u003Cspan class=\"hljs-attribute\"\u003Evertical-align\u003C\u002Fspan\u003E: middle;\n  \u003Cspan class=\"hljs-attribute\"\u003Eposition\u003C\u002Fspan\u003E: relative;\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\n\u003Cp\u003EThe end result was this:\u003C\u002Fp\u003E\n\u003Cdiv id=\"imageDiv\"\u003E\n  \u003Cfigure\u003E\n    \u003Cimg src=\"https:\u002F\u002Fjoshlearningtocode.files.wordpress.com\u002F2020\u002F08\u002Frecent_posts.png\" alt=\"The improved recent posts page\" \u002F\u003E\n    \u003Cfigcaption\u003EThe improved recent posts page, you must have seen it to get here though!\u003C\u002Ffigcaption\u003E\n  \u003C\u002Ffigure\u003E\n\u003C\u002Fdiv\u003E\n\n\u003Cp\u003ENexy I wanted to host the blog somewhere. Up to now I had been viewing the blog locally using \u003Ccode\u003Enpm run dev\u003C\u002Fcode\u003E to run the app on \u003Ccode\u003Elocalhost:3000\u003C\u002Fcode\u003E. It was helpful as it would automatically update after I saved any files, but I was now ready to deploy it somewhere actually visible to the world. I decided to use GitHub Pages as it is free and integrated directly with my repository.\u003C\u002Fp\u003E\n\u003Cp\u003EI found another blog post which was helpful in getting this working:\n\u003Ca href=\"https:\u002F\u002Fdev.to\u002Fpixeline\u002Fhow-to-deploy-a-sapper-pwa-on-github-pages-47lc\" target=\"_blank\"\u003Ehttps:\u002F\u002Fdev.to\u002Fpixeline\u002Fhow-to-deploy-a-sapper-pwa-on-github-pages-47lc\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EI pretty much followed it to the word here, my only addition was adding this to my \u003Ccode\u003Epackage.json\u003C\u002Fcode\u003E file in the \u003Ccode\u003Escripts {}\u003C\u002Fcode\u003E section:\u003C\u002Fp\u003E\n\u003Cdiv id=\"codeSnippet\"\u003E\n\n\u003Cpre class='language-javascriptreact'\u003E\u003Ccode\u003E&quot;predeploy&quot;: &quot;npx sapper export&quot;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\n\u003Cp\u003EThis meant that before trying to deploy the app it would always rebuild and export it. I got this working and up on my GitHub Pages pretty quickly, so I can deploy with a simple \u003Ccode\u003Enpm run reploy\u003C\u002Fcode\u003E. However running that command every time would be a bit annoying, so I added a GitHub Action to deploy it automatically. \u003C\u002Fp\u003E\n\u003Cp\u003EI found this post which helped me set up a \u003Ccode\u003Esapper_build.yml\u003C\u002Fcode\u003E file:\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fmarketplace\u002Factions\u002Fsapper-action\" target=\"_blank\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fmarketplace\u002Factions\u002Fsapper-action\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cdiv id=\"codeSnippets\"\u003E\n\n\u003Cpre class='language-javascriptreact'\u003E\u003Ccode\u003E\u003Cspan class=\"hljs-attr\"\u003Ename:\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003EBuild\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003ESapper\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003Eand\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003EDeploy\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003Eto\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003EGitHub\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003EPages\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-attr\"\u003Eon:\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-attr\"\u003Epush:\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-attr\"\u003Ebranches:\u003C\u002Fspan\u003E [ \u003Cspan class=\"hljs-string\"\u003Emaster\u003C\u002Fspan\u003E ]\n    \u003Cspan class=\"hljs-attr\"\u003Epull_request:\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-attr\"\u003Ebranches:\u003C\u002Fspan\u003E [ \u003Cspan class=\"hljs-string\"\u003Emaster\u003C\u002Fspan\u003E ]\n\n\u003Cspan class=\"hljs-attr\"\u003Ejobs:\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-attr\"\u003Ebuild_deploy:\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-attr\"\u003Eruns-on:\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003Eubuntu-latest\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-attr\"\u003Esteps:\u003C\u002Fspan\u003E\n      \u003Cspan class=\"hljs-bullet\"\u003E-\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Euses:\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003Eactions\u002Fcheckout@master\u003C\u002Fspan\u003E\n      \u003Cspan class=\"hljs-bullet\"\u003E-\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Ename:\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003EBuild\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003ESapper\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-attr\"\u003Euses:\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003Etruewebartisans\u002Factions-sapper@master\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-attr\"\u003Ewith:\u003C\u002Fspan\u003E\n            \u003Cspan class=\"hljs-attr\"\u003Eargs:\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E&quot;--basepath JoshsBlog --legacy&quot;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"hljs-bullet\"\u003E-\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Ename:\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003EDeploy\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003Eto\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003EGitHub\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003EPages\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-attr\"\u003Euses:\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003Epeaceiris\u002Factions-gh-pages@v3\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-attr\"\u003Ewith:\u003C\u002Fspan\u003E\n          \u003Cspan class=\"hljs-attr\"\u003Epublish_dir:\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E__sapper__\u002Fexport\u002FJoshsBlog\u002F\u003C\u002Fspan\u003E\n          \u003Cspan class=\"hljs-attr\"\u003Epublish_branch:\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003Egh-pages\u003C\u002Fspan\u003E\n          \u003Cspan class=\"hljs-attr\"\u003Egithub_token:\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E${{\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003Esecrets.GITHUB_TOKEN\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E}}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\n\u003Cp\u003EThis meant that any time I pushed or merged to master, it would kick off this action, which will build and deploy my project into my gh-pages branch, where GitHub Pages reads the data from.\u003C\u002Fp\u003E\n\u003Cdiv id=\"imageDiv\"\u003E\n  \u003Cfigure\u003E\n    \u003Cimg src=\"https:\u002F\u002Fjoshlearningtocode.files.wordpress.com\u002F2020\u002F08\u002Fgithub_actions.png\" alt=\"GitHub Actions running my deploy script\" \u002F\u003E\n    \u003Cfigcaption\u003EGitHub Actions running my deploy script after each merge\u003C\u002Ffigcaption\u003E\n  \u003C\u002Ffigure\u003E\n\u003C\u002Fdiv\u003E\n\n\n\u003Cp\u003EThe end result of all this is the blog you are currently reading! It is hosted here:\n\u003Ca href=\"https:\u002F\u002Fjoshglasson.com\u002F\" target=\"_blank\"\u003Ehttps:\u002F\u002Fjoshglasson.com\u002F\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EAfter seeing it live I realised that the posts were in chronological order, as in oldest at the top. That doesn&#39;t make much sense for a blog, so I flipped it round by editing the function used to retrieve the posts:\u003C\u002Fp\u003E\n\u003Cdiv id=\"codeSnippet\"\u003E\n\n\u003Cpre class='language-javascriptreact'\u003E\u003Ccode\u003E\u003Cspan class=\"hljs-keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003Epreload\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003E{ params, query }\u003C\u002Fspan\u003E) \u003C\u002Fspan\u003E{\n  \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-built_in\"\u003Ethis\u003C\u002Fspan\u003E.fetch(\u003Cspan class=\"hljs-string\"\u003E`blog.json`\u003C\u002Fspan\u003E).then(\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-params\"\u003Er\u003C\u002Fspan\u003E =&gt;\u003C\u002Fspan\u003E r.json()).then(\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-params\"\u003Eposts\u003C\u002Fspan\u003E =&gt;\u003C\u002Fspan\u003E {\n    posts.sort().reverse()\n    \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E { posts };\n  });\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\n\u003Cp\u003EI then viewed it on my phone and felt some of the images were a bit too small, so I wanted the images to expand when clicked. I started following a guide on \u003Ca href=\"https:\u002F\u002Fwww.w3schools.com\u002Fhowto\u002Fhowto_css_modal_images.asp\" target=\"_blank\"\u003Eusing modals by w3schools\u003C\u002Fa\u003E which was a helpful starting point. However there was a couple of problems. The first was that \u003Ccode\u003Edocument\u003C\u002Fcode\u003E did not exist straight away for me, so it would throw an error, the second was their example only worked for one image, to have more than one you would have to specify every single image id.\u003C\u002Fp\u003E\n\u003Cp\u003ETo solve the first problem, I used \u003Ccode\u003EonMount\u003C\u002Fcode\u003E to wait for the page to load before triggering the script, so \u003Ccode\u003Edocument\u003C\u002Fcode\u003E definitely existed before I tried accessing it.\nTo solve the second problem I had to change a little more. Instead of getting a single element by id, I got all elements that had the \u003Ccode\u003Eimg\u003C\u002Fcode\u003E tag.\u003C\u002Fp\u003E\n\u003Cdiv id=\"codeSnippet\"\u003E\n\n\u003Cpre class='language-javascriptreact'\u003E\u003Ccode\u003E\u003Cspan class=\"hljs-keyword\"\u003Evar\u003C\u002Fspan\u003E img = \u003Cspan class=\"hljs-built_in\"\u003Edocument\u003C\u002Fspan\u003E.getElementsByTagName(\u003Cspan class=\"hljs-string\"\u003E&quot;IMG&quot;\u003C\u002Fspan\u003E);\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\n\u003Cp\u003ENow that I had an array of all my image elements, instead of attaching an \u003Ccode\u003Eonclick\u003C\u002Fcode\u003E to a single element, I looped through my array and an attached event listener to each image.\u003C\u002Fp\u003E\n\u003Cdiv id=\"codeSnippet\"\u003E\n\n\u003Cpre class='language-javascriptreact'\u003E\u003Ccode\u003E\u003Cspan class=\"hljs-keyword\"\u003Efor\u003C\u002Fspan\u003E (\u003Cspan class=\"hljs-keyword\"\u003Evar\u003C\u002Fspan\u003E i = \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E; i &lt; img.length; i++) {\n  img[i].addEventListener(\u003Cspan class=\"hljs-string\"\u003E&#x27;click&#x27;\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003Eevent\u003C\u002Fspan\u003E)\u003C\u002Fspan\u003E{\n    event.preventDefault()\n    modal.style.display = \u003Cspan class=\"hljs-string\"\u003E&quot;block&quot;\u003C\u002Fspan\u003E;\n    modalImg.src = \u003Cspan class=\"hljs-built_in\"\u003Ethis\u003C\u002Fspan\u003E.src;\n    captionText.innerHTML = \u003Cspan class=\"hljs-built_in\"\u003Ethis\u003C\u002Fspan\u003E.alt;\n  });\n}; \u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\n\u003Cp\u003EThis worked exactly as intended!\u003C\u002Fp\u003E\n\u003Cp\u003EI wanted to be able to swipe to close the images when viewing on mobile too, so I added some more functions to handle this:\u003C\u002Fp\u003E\n\u003Cdiv id=\"codeSnippet\"\u003E\n\n\u003Cpre class='language-javascriptreact'\u003E\u003Ccode\u003E\u003Cspan class=\"hljs-keyword\"\u003Evar\u003C\u002Fspan\u003E touchstartY = \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E;\n\u003Cspan class=\"hljs-keyword\"\u003Evar\u003C\u002Fspan\u003E touchendY = \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E;\n\u003Cspan class=\"hljs-built_in\"\u003Ewindow\u003C\u002Fspan\u003E.addEventListener(\u003Cspan class=\"hljs-string\"\u003E&#x27;touchstart&#x27;\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003Eevent\u003C\u002Fspan\u003E) \u003C\u002Fspan\u003E{\n  \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (modal.style.display === \u003Cspan class=\"hljs-string\"\u003E&#x27;block&#x27;\u003C\u002Fspan\u003E) {\n    \u003Cspan class=\"hljs-built_in\"\u003Econsole\u003C\u002Fspan\u003E.log(\u003Cspan class=\"hljs-string\"\u003E&#x27;touchstart&#x27;\u003C\u002Fspan\u003E);\n    \u003Cspan class=\"hljs-built_in\"\u003Econsole\u003C\u002Fspan\u003E.log(event);\n    touchstartY = event.changedTouches[\u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E].screenY;\n  }\n}, \u003Cspan class=\"hljs-literal\"\u003Efalse\u003C\u002Fspan\u003E);\n\n\u003Cspan class=\"hljs-built_in\"\u003Ewindow\u003C\u002Fspan\u003E.addEventListener(\u003Cspan class=\"hljs-string\"\u003E&#x27;touchend&#x27;\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003Eevent\u003C\u002Fspan\u003E) \u003C\u002Fspan\u003E{\n  \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (modal.style.display === \u003Cspan class=\"hljs-string\"\u003E&#x27;block&#x27;\u003C\u002Fspan\u003E) {\n    \u003Cspan class=\"hljs-built_in\"\u003Econsole\u003C\u002Fspan\u003E.log(\u003Cspan class=\"hljs-string\"\u003E&#x27;touchend&#x27;\u003C\u002Fspan\u003E);\n    touchendY = event.changedTouches[\u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E].screenY;\n    handleGesure();\n  }\n}, \u003Cspan class=\"hljs-literal\"\u003Efalse\u003C\u002Fspan\u003E);\n\n\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003EhandleGesure\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003E\u003C\u002Fspan\u003E) \u003C\u002Fspan\u003E{\n  \u003Cspan class=\"hljs-keyword\"\u003Evar\u003C\u002Fspan\u003E swiped = \u003Cspan class=\"hljs-string\"\u003E&#x27;swiped: &#x27;\u003C\u002Fspan\u003E;\n\n  \u003Cspan class=\"hljs-keyword\"\u003Evar\u003C\u002Fspan\u003E dif = \u003Cspan class=\"hljs-built_in\"\u003EMath\u003C\u002Fspan\u003E.abs(touchstartY - touchendY);\n  \u003Cspan class=\"hljs-keyword\"\u003Evar\u003C\u002Fspan\u003E h = \u003Cspan class=\"hljs-built_in\"\u003Ewindow\u003C\u002Fspan\u003E.innerHeight\u002F\u003Cspan class=\"hljs-number\"\u003E3\u003C\u002Fspan\u003E;\n  \u003Cspan class=\"hljs-built_in\"\u003Econsole\u003C\u002Fspan\u003E.log(dif)\n  \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (dif &gt; h) {\n    closeModal()\n  }\n}\n\n\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003EcloseModal\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003E\u003C\u002Fspan\u003E) \u003C\u002Fspan\u003E{\n  modal.style.display = \u003Cspan class=\"hljs-string\"\u003E&#x27;none&#x27;\u003C\u002Fspan\u003E;\n  \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E scrollY = \u003Cspan class=\"hljs-built_in\"\u003Edocument\u003C\u002Fspan\u003E.body.style.top;\n  \u003Cspan class=\"hljs-built_in\"\u003Edocument\u003C\u002Fspan\u003E.body.style.position = \u003Cspan class=\"hljs-string\"\u003E&#x27;&#x27;\u003C\u002Fspan\u003E;\n  \u003Cspan class=\"hljs-built_in\"\u003Edocument\u003C\u002Fspan\u003E.body.style.top = \u003Cspan class=\"hljs-string\"\u003E&#x27;&#x27;\u003C\u002Fspan\u003E;\n  \u003Cspan class=\"hljs-built_in\"\u003Ewindow\u003C\u002Fspan\u003E.scrollTo(\u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-built_in\"\u003EparseInt\u003C\u002Fspan\u003E(scrollY || \u003Cspan class=\"hljs-string\"\u003E&#x27;0&#x27;\u003C\u002Fspan\u003E) * \u003Cspan class=\"hljs-number\"\u003E-1\u003C\u002Fspan\u003E);\n  \u003Cspan class=\"hljs-built_in\"\u003Edocument\u003C\u002Fspan\u003E.body.style.left = \u003Cspan class=\"hljs-string\"\u003E&#x27;&#x27;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-built_in\"\u003Edocument\u003C\u002Fspan\u003E.body.style.transform = \u003Cspan class=\"hljs-string\"\u003E&#x27;&#x27;\u003C\u002Fspan\u003E\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\n\u003Cp\u003EBasically this code listens for touches on the screen whilst the modal is open. It records the start and end position for the touches on the y axis (so only swipes up or down). It calculates the difference between the two to see how far the user swiped, then compares that to the height of the screen. If the distance swiped is over a third of the screen size it will trigger the method to close the modal.\u003C\u002Fp\u003E\n\u003Cp\u003EI also had to add some styling here to ensure that swiping didn&#39;t change the position on the body behind the modal, as at first it would scroll the page. I updated the event listener that opened the modal: \u003C\u002Fp\u003E\n\u003Cdiv id=\"codeSnippet\"\u003E\n\n\u003Cpre class='language-javascriptreact'\u003E\u003Ccode\u003E\u003Cspan class=\"hljs-keyword\"\u003Efor\u003C\u002Fspan\u003E (\u003Cspan class=\"hljs-keyword\"\u003Evar\u003C\u002Fspan\u003E i = \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E; i &lt; img.length; i++) {\n  img[i].addEventListener(\u003Cspan class=\"hljs-string\"\u003E&#x27;click&#x27;\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003Eevent\u003C\u002Fspan\u003E)\u003C\u002Fspan\u003E{\n    event.preventDefault();\n    \u003Cspan class=\"hljs-built_in\"\u003Edocument\u003C\u002Fspan\u003E.body.style.top = \u003Cspan class=\"hljs-string\"\u003E`-\u003Cspan class=\"hljs-subst\"\u003E${\u003Cspan class=\"hljs-built_in\"\u003Ewindow\u003C\u002Fspan\u003E.scrollY}\u003C\u002Fspan\u003Epx`\u003C\u002Fspan\u003E;\n    modal.style.display = \u003Cspan class=\"hljs-string\"\u003E&quot;block&quot;\u003C\u002Fspan\u003E;\n    modalImg.src = \u003Cspan class=\"hljs-built_in\"\u003Ethis\u003C\u002Fspan\u003E.src;\n    captionText.innerHTML = \u003Cspan class=\"hljs-built_in\"\u003Ethis\u003C\u002Fspan\u003E.alt;\n    \u003Cspan class=\"hljs-built_in\"\u003Edocument\u003C\u002Fspan\u003E.body.style.position = \u003Cspan class=\"hljs-string\"\u003E&#x27;fixed&#x27;\u003C\u002Fspan\u003E;\n  });\n}; \u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\n\u003Cp\u003E\u003Ccode\u003Edocument.body.style.top = &#39;-${window.scrollY}px&#39;\u003C\u002Fcode\u003E records the current scroll position on the screen. This had to go before the opening of the modal otherwise the window would change from referring to the body to referring to the modal. \u003Ccode\u003Edocument.body.style.position = &#39;fixed&#39;;\u003C\u002Fcode\u003E stops the screen from scrolling.\u003C\u002Fp\u003E\n\u003Cp\u003EThe following in the \u003Ccode\u003EcloseModal()\u003C\u002Fcode\u003E function resets these values back to normal upon closing the modal:\u003C\u002Fp\u003E\n\u003Cdiv id=\"codeSnippet\"\u003E\n\n\u003Cpre class='language-javascriptreact'\u003E\u003Ccode\u003E\u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E scrollY = \u003Cspan class=\"hljs-built_in\"\u003Edocument\u003C\u002Fspan\u003E.body.style.top;\n\u003Cspan class=\"hljs-built_in\"\u003Edocument\u003C\u002Fspan\u003E.body.style.position = \u003Cspan class=\"hljs-string\"\u003E&#x27;&#x27;\u003C\u002Fspan\u003E;\n\u003Cspan class=\"hljs-built_in\"\u003Edocument\u003C\u002Fspan\u003E.body.style.top = \u003Cspan class=\"hljs-string\"\u003E&#x27;&#x27;\u003C\u002Fspan\u003E;\n\u003Cspan class=\"hljs-built_in\"\u003Ewindow\u003C\u002Fspan\u003E.scrollTo(\u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-built_in\"\u003EparseInt\u003C\u002Fspan\u003E(scrollY || \u003Cspan class=\"hljs-string\"\u003E&#x27;0&#x27;\u003C\u002Fspan\u003E) * \u003Cspan class=\"hljs-number\"\u003E-1\u003C\u002Fspan\u003E);\n\u003Cspan class=\"hljs-built_in\"\u003Edocument\u003C\u002Fspan\u003E.body.style.left = \u003Cspan class=\"hljs-string\"\u003E&#x27;&#x27;\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-built_in\"\u003Edocument\u003C\u002Fspan\u003E.body.style.transform = \u003Cspan class=\"hljs-string\"\u003E&#x27;&#x27;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\n\u003Cp\u003EI hope this was interesting and helpful to anyone else trying to build a website with Svelte and Sapper!\u003C\u002Fp\u003E\n",slug:"creating_the_blog",title:"Creating This Blog.",headline:"How to create a blog using Svelte",image:".\u002Fimages\u002Ficons\u002Fsvelte_logo.png",sortdate:a,originaldate:a,tags:["Software Development","Svelte","HTML, CSS & JavaScript"]}}}("2020-07-24"))]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');var s=document.createElement("script");try{new Function("if(0)import('')")();s.src="/client/client.b22d7845.js";s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@1.0.1.js";s.setAttribute("data-main","/client/client.b22d7845.js")}document.head.appendChild(s)</script> 