{"html":"<p>I have talked about the reasons for me writing this blog on the sites <a href=\"about\"><strong>about</strong></a> page, so here is <strong><i>how</i></strong>.</p>\n<p>I attended a course through Makers Academy where <a href=\"https://mco.dev/\" target=\"_blank\">Marc Cohen</a> from Google gave us a quick run down of how to use Go. During the talk he mentioned <a href=\"https://svelte.dev/\" target=\"_blank\">Svelte</a>, which I decided to look into. I had quite liked working in React and saw it was similar, but if anything easier. \nAfter a bit of research I decided why not create my own blog!</p>\n<p>I found a guide on how to create a blog website based off of Sveltes sapper template:\n<a href=\"https://www.mahmoudashraf.dev/blog/build-a-blog-with-svelte-and-markdown/\" target=\"_blank\">https://www.mahmoudashraf.dev/blog/build-a-blog-with-svelte-and-markdown/</a></p>\n<p>I followed this blog post exactly to get a template to start working from. The only change was at the point of writing the blog post in markdown. The blog specifies that the file name and slug have to be the same, but theirs are different, so the example doesn&#39;t work!</p>\n<p>Now I had a solid baseline to start with, I started to think about what I would like to change. For some reason, my first thought was that it needed a dark mode. I did a quick bit of Googling and found <a href=\"https://svelte.dev/repl/ed4fef4beceb4b0eb295d1f9fdf3bd62?version=3.6.9\" target=\"_blank\">this on the Svelte REPL</a>:</p>\n<div id=\"imageDiv\">\n  <figure>\n    <img class=\"myImg\" src=\"./images/2020-07-24 creating-the-blog/darkmode_app.png\" style=\"width:50%;\" alt=\"An App with a Button to toggle a dark mode\"/>\n    <figcaption>An App with a Button to toggle a dark mode</figcaption>\n  </figure>\n  <figure>\n    <img class=\"myImg\" src=\"./images/2020-07-24 creating-the-blog/darkmode_button.png\" style=\"width:50%;\" alt=\"Code for the Dark Mode Button\"/>\n    <figcaption>Code for the Button</figcaption></a>\n  </figure>\n</div>\n\n<p>This puts a button on the screen that lets you swap toggle dark mode on and off. I decided to take it to the next step, instead of having a button, I wanted to have it on my nav bar, and I also wanted to store the selection as a cookie so a users preference would be remembered.</p>\n<p>I added the following code to the top of my Nav component:</p>\n<div id=\"codeSnippet\">\n\n<pre class='language-javascriptreact'><code><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">let</span> dark_toggle;\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">toggle</span>(<span class=\"hljs-params\"></span>) </span>{\n  <span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-string\">&quot;Start toggle: &quot;</span> + dark_toggle)\n  <span class=\"hljs-keyword\">if</span> (dark_toggle === <span class=\"hljs-string\">&#x27;false&#x27;</span>) {\n    <span class=\"hljs-built_in\">window</span>.document.body.classList.add(<span class=\"hljs-string\">&#x27;dark-mode&#x27;</span>)\n    <span class=\"hljs-built_in\">localStorage</span>.setItem(<span class=\"hljs-string\">&#x27;dark_mode_toggle&#x27;</span>, <span class=\"hljs-string\">&#x27;true&#x27;</span>)\n    dark_toggle = <span class=\"hljs-string\">&#x27;true&#x27;</span>\n  } <span class=\"hljs-keyword\">else</span> {\n    <span class=\"hljs-built_in\">window</span>.document.body.classList.remove(<span class=\"hljs-string\">&#x27;dark-mode&#x27;</span>)\n    <span class=\"hljs-built_in\">localStorage</span>.setItem(<span class=\"hljs-string\">&#x27;dark_mode_toggle&#x27;</span>, <span class=\"hljs-string\">&#x27;false&#x27;</span>)\n    dark_toggle = <span class=\"hljs-string\">&#x27;false&#x27;</span>\n  }\n  <span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-string\">&quot;End toggle: &quot;</span> + dark_toggle)\n}\n\nonMount(<span class=\"hljs-keyword\">async</span> () =&gt; {\n  dark_toggle = <span class=\"hljs-built_in\">localStorage</span>.getItem(<span class=\"hljs-string\">&#x27;dark_mode_toggle&#x27;</span>)\n  <span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-string\">&quot;From Storage: &quot;</span> + dark_toggle)\n  <span class=\"hljs-keyword\">if</span> (dark_toggle === <span class=\"hljs-string\">&#x27;true&#x27;</span>) {\n    <span class=\"hljs-built_in\">window</span>.document.body.classList.add(<span class=\"hljs-string\">&#x27;dark-mode&#x27;</span>)\n  }\n});</code></pre></div>\n\n<p>The first part is the <code>toggle()</code> function, which when activated checks a variable called <code>dark_toggle</code>. If it is set to false, then it will apply the dark mode, and set the variable to true. If it is already true it does the opposite. As well as setting the local variable, it also sets an item in <code>localStorage</code> called <code>dark_mode_toggle</code> to the same value. This means that it is stored locally on the users browser.</p>\n<p>The <code>onMount</code> method will run as soon as the document is loaded, and it retrieves the flag from <code>localStorage</code> and sets the theme accordingly.</p>\n<p>I added the following to my Nav code too, in the list which makes up the links:</p>\n<div id=\"codeSnippet\">\n\n<pre class='language-javascriptreact'><code>&lt;li&gt;<span class=\"xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">on:click</span>=<span class=\"hljs-string\">{toggle}</span>&gt;</span>{dark_toggle === &#x27;true&#x27; ? &quot;light&quot; : &quot;dark&quot;} mode<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span></span>&lt;/li&gt;</code></pre></div>\n\n<p>So <code>on:click={toggle}</code> means it will activate the <code>toggle()</code> function when clicked. The text it displays will change depending on what theme is selected too. I also added <code>cursor: pointer;</code> to my CSS rules to ensure that the cursor changed to a pointer when hovering over the option in the nav bar. This was the outcome:</p>\n<div id=\"imageDiv\">\n  <figure>\n    <img class=\"myImg\" src=\"https://joshlearningtocode.files.wordpress.com/2020/07/blog_dark_mode.gif\" alt=\"A gif of my blog switching themes\"/>\n  </figure>\n</div>\n\n<p>After getting this working, I made a few more changes to the front and about pages to make them relevant to me. The next big change I made was to the Recent Posts page. You can see in the blog post I started with that the recent posts were just displayed as a list of links. I wanted mine to be a bit more fancy, with a cover image, title and headline. Looking at how they had created the link using the title in the markdown files, it was easy to add more information. At the beggining of each markdown file, I added headline and image so I could then pull them out when creating the recent posts.</p>\n<p>Here is the information in the markdown file:</p>\n<div id=\"codeSnippet\">\n\n<pre class='language-javascriptreact'><code>---\nslug: &#x27;2020-07-24 creating-the-blog&#x27;\ntitle: &#x27;Creating This Blog.&#x27;\nheadline: &#x27;How to create a blog using Svelte&#x27;\n<span class=\"hljs-section\">image: &quot;./images/svelte<span class=\"hljs-emphasis\">_logo.png&quot;\n---</span></span></code></pre></div>\n\n<p>Which is then accessed in the <code>index.svelte</code> file:</p>\n<div id=\"codeSnippet\">\n\n<pre class='language-javascriptreact'><code>{#each posts as post}\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">img</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">{post.image}</span> <span class=\"hljs-attr\">alt</span>=<span class=\"hljs-string\">&quot;Post Display&quot;</span>/&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">rel</span>=<span class=\"hljs-string\">&#x27;prefetch&#x27;</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&#x27;blog/{post.slug}&#x27;</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span>&gt;</span>{post.title}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h3</span>&gt;</span>{post.headline}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h3</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n{/each}</code></pre></div>\n\n<p>Now I had more information to work with, I changed the CSS rules to make the page look more appealing:</p>\n<div id=\"codeSnippet\">\n\n<pre class='language-javascriptreact'><code><span class=\"hljs-selector-id\">#pageTitle</span> {\n  <span class=\"hljs-attribute\">margin</span>: <span class=\"hljs-number\">0</span> <span class=\"hljs-number\">0</span> <span class=\"hljs-number\">2em</span> <span class=\"hljs-number\">0</span>;\n}\n\n<span class=\"hljs-selector-tag\">div</span> {\n  <span class=\"hljs-attribute\">margin</span>: <span class=\"hljs-number\">0</span> <span class=\"hljs-number\">0</span> <span class=\"hljs-number\">1em</span> <span class=\"hljs-number\">1em</span>;\n  <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">100%</span>;\n  <span class=\"hljs-attribute\">padding-bottom</span>: <span class=\"hljs-number\">0.5em</span>;\n  <span class=\"hljs-attribute\">border-bottom</span>: <span class=\"hljs-number\">1px</span> solid lightgray;\n  <span class=\"hljs-attribute\">overflow-x</span>: auto;\n}\n\n<span class=\"hljs-selector-tag\">div</span> <span class=\"hljs-selector-tag\">img</span> {\n  <span class=\"hljs-attribute\">display</span>: block;\n  <span class=\"hljs-attribute\">float</span>: left;\n  <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">100%</span>;\n  <span class=\"hljs-attribute\">max-width</span>: <span class=\"hljs-number\">150px</span>;\n  <span class=\"hljs-attribute\">margin</span>: <span class=\"hljs-number\">0</span> <span class=\"hljs-number\">1em</span> <span class=\"hljs-number\">0</span> <span class=\"hljs-number\">0</span>;\n}\n\n<span class=\"hljs-selector-tag\">div</span> <span class=\"hljs-selector-tag\">h1</span>{\n  <span class=\"hljs-attribute\">vertical-align</span>: middle;\n}\n\n<span class=\"hljs-selector-tag\">div</span> <span class=\"hljs-selector-tag\">h3</span>{\n  <span class=\"hljs-attribute\">vertical-align</span>: middle;\n  <span class=\"hljs-attribute\">position</span>: relative;\n}</code></pre></div>\n\n<p>The end result was this:</p>\n<div id=\"imageDiv\">\n  <figure>\n    <img class=\"myImg\" src=\"./images/2020-07-24 creating-the-blog/recent_posts.png\" alt=\"The improved recent posts page\" />\n    <figcaption>The improved recent posts page, you must have seen it to get here though!</figcaption>\n  </figure>\n</div>\n\n<p>The final part was to host the blog somewhere. Up to now I had been checking how it looked using <code>npm run dev</code> to run the app on <code>localhost:3000</code>. It was helpful as it would automatically update after I saved any files. But I know wanted to deploy it somewhere. I decided to use GitHub Pages as it is free and integrated directly with my repository.</p>\n<p>I found another blog post which was helpful in getting this working:\n<a href=\"https://dev.to/pixeline/how-to-deploy-a-sapper-pwa-on-github-pages-47lc\" target=\"_blank\">https://dev.to/pixeline/how-to-deploy-a-sapper-pwa-on-github-pages-47lc</a></p>\n<p>I pretty much followed it to the word here, my only addition was adding this to my <code>package.json</code> file in the <code>scripts {}</code> section:</p>\n<div id=\"codeSnippet\">\n\n<pre class='language-javascriptreact'><code>&quot;predeploy&quot;: &quot;npx sapper export&quot;</code></pre></div>\n\n<p>This meant that before trying to deploy the app it would always rebuild and export it.</p>\n<p>I got this working and up on my GitHub Pages pretty quickly, so I can deploy with a simple <code>npm run reploy</code>.</p>\n<p>I realised that the posts were in chronological order, as in oldest at the top. That doesn&#39;t make much sense for a blog, so I flipped it round by editing the function used to retrieve the posts:</p>\n<div id=\"codeSnippet\">\n\n<pre class='language-javascriptreact'><code><span class=\"hljs-keyword\">export</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">preload</span>(<span class=\"hljs-params\">{ params, query }</span>) </span>{\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">this</span>.fetch(<span class=\"hljs-string\">`blog.json`</span>).then(<span class=\"hljs-function\"><span class=\"hljs-params\">r</span> =&gt;</span> r.json()).then(<span class=\"hljs-function\"><span class=\"hljs-params\">posts</span> =&gt;</span> {\n    posts.sort().reverse()\n    <span class=\"hljs-keyword\">return</span> { posts };\n  });\n}</code></pre></div>\n\n<p>The last thing I wanted was for images to expand when clicked, to make it easier to view them. I started following a guide on <a href=\"https://www.w3schools.com/howto/howto_css_modal_images.asp\" target=\"_blank\">using modals by w3schools</a> which was a helpful starting point. However there was a couple of problems. The first was that <code>document</code> did not exist straight away for me, so it would throw an error, the second was their example only worked for one image, to have more than one you would have to specify every single image id.</p>\n<p>To solve the first problem, I used onMount to wait for the page to load before triggering the script, so document definitely existed before I tried accessing it.\nTo solve the second problem I had to change a little more. Instead of getting a single element by id, I gave all my images a class name of &quot;myImg&quot;, and got that instead.</p>\n<div id=\"codeSnippet\">\n\n<pre class='language-javascriptreact'><code><span class=\"hljs-keyword\">var</span> img = <span class=\"hljs-built_in\">document</span>.getElementsByClassName(<span class=\"hljs-string\">&quot;myImg&quot;</span>);</code></pre></div>\n\n<p>Now I had an array of all my image elements. Next instead of attaching an <code>onclick</code> to a single element, I looped through my array and attached event listener to each image.</p>\n<div id=\"codeSnippet\">\n\n<pre class='language-javascriptreact'><code><span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; img.length; i++) {\n  img[i].addEventListener(<span class=\"hljs-string\">&#x27;click&#x27;</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">event</span>)</span>{\n    event.preventDefault()\n    modal.style.display = <span class=\"hljs-string\">&quot;block&quot;</span>;\n    modalImg.src = <span class=\"hljs-built_in\">this</span>.src;\n    captionText.innerHTML = <span class=\"hljs-built_in\">this</span>.alt;\n  });\n}; </code></pre></div>\n\n<p>This worked exactly as intended!</p>\n<p>The end result of all this is the blog you are currently reading! It is hosted here:\n<a href=\"https://joshglasson.github.io/JoshsBlog/\" target=\"_blank\">https://joshglasson.github.io/JoshsBlog/</a></p>\n<p>Hope this was interesting and helpful!</p>\n","slug":"2020-07-24 creating-the-blog","title":"Creating This Blog.","headline":"How to create a blog using Svelte","image":"./images/2020-07-24 creating-the-blog/svelte_logo.png"}